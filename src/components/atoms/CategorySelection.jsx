import React, { useEffect, useState } from "react";
import { useMainContext } from "../../context/MainContext";
import { useLocation, useNavigate } from "react-router-dom";
import ModalProductCategory from "./ModalProductCategory";

const CategorySelection = ({ category, selected }) => {
  const { setSearchQuery } = useMainContext();
  const { activeCategory, setActiveCategory, otherSelected, setOtherSelected } =
    useMainContext();
  const navigate = useNavigate();
  const [isVisible, setIsVisible] = useState(false);

  useEffect(() => {
    setSearchQuery(null);
  }, []);

  useEffect(() => {
    setActiveCategory("");
  }, [otherSelected]);

  return (
    <div className="relative">
      <ModalProductCategory isVisible={isVisible} setState={setIsVisible} />
      <div className="px-2 mt-4">
        <h2 className={`font-semibold text-lg ${category ? null : "hidden"}`}>
          Kategori
        </h2>
        <div className="mt-3 flex justify-between">
          <div className="flex flex-col items-center w-fit">
            <button
              className={`w-12 h-12 bg-[#276b1e] rounded-full grid place-content-center ${
                activeCategory === "Gula Aren" ? "bg-yellow-500" : null
              }`}
              onClick={() => {
                navigate("/find/gula-aren");
                setOtherSelected(false);
              }}
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                xmlSpace="preserve"
                width={64}
                height={64}
                fill="#fff"
                stroke="#fff"
                viewBox="0 0 490.17 490.17"
                className="w-7"
              >
                <path d="M402.487 220.657c-5.4-22.2-10.9-44.7-16.3-66.9-92.9 19-189.3 19-282.2 0-5.4 22.2-10.9 44.7-16.3 66.9 103.8 21 211 21 314.8 0zM358.187 138.557c-1.2-7-3.1-14-6.6-20.6-10.5-19.4-33-31.1-43.2-50.5-5.8-11.7-7-25.7-16.7-35-9.7-9.7-26.4-12.1-36.9-21.4-4.7-4.3-8.6-9.7-14.8-10.9-7.4-1.2-13.6 4.7-17.9 10.1-17.9 21.4-33.8 44.3-46.7 68.4-2.7 5.4-35.4 35.4-40.8 43.2-3.9 5.1-7.4 10.1-10.5 15.6 40 7 80.5 10.5 120.9 10.5 38.2 0 75.9-3.1 113.2-9.4zM375.687 245.557c-43.2 7-87.1 10.5-130.6 10.5s-87.5-3.5-130.6-10.5c-1.2 56-3.9 151.2-59.5 212.3 0 0 75 36.5 190.1 31.9 115.1 4.7 190.1-31.9 190.1-31.9-50.5-58.8-57.5-155.6-59.5-212.3z" />
              </svg>
            </button>
            <p className="text-xs mt-2 text-center">
              Gula <br /> Aren
            </p>
          </div>
          <div className="flex flex-col items-center w-fit">
            <button
              onClick={() => {
                navigate("/find/produk-camilan");
                setOtherSelected(false);
              }}
              className={`w-12 h-12 ${
                activeCategory === "Produk Camilan" ? "bg-yellow-500" : null
              } bg-[#276b1e] rounded-full grid place-content-center`}
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width={64}
                height={64}
                viewBox="0 0 512 512"
                className="w-7"
              >
                <path
                  fill="#fff"
                  d="M132.684 31.388a1.443 1.443 0 0 0-.29.004c-.396.048-.768.25-1.398.609-1.26.719-3.215 2.597-5.039 5.484-3.648 5.776-6.593 15.148-7.516 22.34-2.004 15.623 3.42 23.692 13.293 31.436 5 3.92 11.236 7.328 17.914 10.515-3.23-13.668-3.189-27.344-3.732-38.859-.419-8.882-1.232-16.509-3.107-21.623-1.853-5.052-3.884-7.627-8.987-9.62-.472-.156-.833-.262-1.138-.286zm111.212 11.478c-27.446.122-54.797 1.187-81.492 2.78.891 5.354 1.23 10.856 1.492 16.423.048 1.01.092 2.025.137 3.037 21.693 20.288 34.01 21.811 44.826 20.485 5.516-.677 10.93-2.497 17.13-3.977a72.596 72.596 0 0 1 3.081-.658c8.481-8.258 19.868-14.662 33.342-20.033A61.785 61.785 0 0 1 287.7 56.56c8.175.303 15.944 2.17 22.854 5.03 6.499 2.69 12.318 6.169 17.218 10.23 2.24-.62 4.518-.928 6.819-.967 7.174-.12 14.565 2.29 21.66 5.385 11.352 4.952 22.62 12.632 31.791 20.908 2.124 1.917 4.14 3.82 6.033 5.737l16.018-3.11 2.63-1.925c13.21-9.668 22.782-20.853 30.01-31.409-56.662-17.009-121.396-23.16-186.43-23.564-4.136-.026-8.271-.028-12.406-.01zm-142.01 7.254a4102.267 4102.267 0 0 0-36.077 3.254c1.134 11.198 6.268 21.673 18.056 32.58l3.17 2.934 22.328 4.808c-6.756-9.505-10.64-21.648-8.777-36.162.309-2.406.74-4.894 1.3-7.414zm183.048 24.371c-5.166.056-10.503 1.019-15.856 3.153C255.233 83.162 245 89.696 239.15 96.478c-5.85 6.78-7.914 13.268-6.27 22.378.093.51.196 1.012.302 1.51l33.588 7.235 69.66-13.526c-4.783-5.828-9.006-12.019-12.248-18.79-2.489-5.199-10.313-12.84-20.512-17.061-5.1-2.111-10.69-3.475-16.533-3.702a43.613 43.613 0 0 0-2.203-.03zm57.095 15.85c3.411 5.378 7.23 10.978 11.621 16.22a150.804 150.804 0 0 0 3.252 3.54l15.147-2.94c-7.09-5.78-15.437-11.126-22.996-14.424a45.357 45.357 0 0 0-7.024-2.396zm-174.496.594c.94 5.71 2.199 11.12 3.799 16.109l43.184 9.303a43.858 43.858 0 0 1 1.423-13.678 70.877 70.877 0 0 1-4.888.787c-11.8 1.447-26.322-.936-43.518-12.521zM91.93 108.356l-8.383 76.563 94.193 2.305c21.335-19.254 48.606-30.866 78.479-30.866 31.857 0 60.758 13.206 82.652 34.805l77.983 1.908-5.041-75.295-145.231 28.198zm164.289 66.002c-58.224 0-106.217 52.74-106.217 119.13 0 66.39 47.993 119.128 106.217 119.128 58.223 0 106.217-52.739 106.217-119.129 0-66.39-47.994-119.129-106.217-119.129zM75.785 202.733l-6.281 62.846C63.95 321.138 77.74 377.93 99.787 435.145l1.66 4.31-2.531 3.86c-7.597 11.588-19.783 21.862-33.562 31.42 14.767 1.264 29.76 2.284 44.917 3.102l22.924-29.006 14.121 11.16-14.927 18.89c14.169.58 28.459.997 42.832 1.278l1.113-25.775 17.984.777-1.093 25.283c16.038.191 32.158.21 48.296.127v-25.629h18v25.5c16.873-.173 33.736-.457 50.543-.818l-3.898-24.117 17.77-2.873 4.296 26.58c16.438-.401 32.687-.872 48.893-1.346l-13.9-23.219 15.445-9.246 19.074 31.867c16.498-.494 32.835-.987 48.902-1.44-12.73-11.767-25.39-24.23-32.433-39.46l-1.111-2.402.367-2.623s12.397-89.64 12.533-132.92c.073-23.34-2.226-55.719-5.145-87.25l-66.455-1.625c16.34 23.275 26.034 52.45 26.034 83.937 0 75.138-55.176 137.13-124.217 137.13-69.042 0-124.217-61.992-124.217-137.13 0-33.654 11.075-64.665 29.502-88.656zm237.53 41.409c6.184-.143 12.236 2.243 17.081 5.77 6.891 5.014 12.332 12.414 15.83 21.1 6.998 17.373 5.063 41.493-15.263 57.376-17.671 13.808-38.32 16.338-57.145 10.445a79.905 79.905 0 0 1-6.324-2.295c-12.764 3.93-27.601 9.065-42.97 9.707-16.562.692-34.526-5.338-46.34-23.398-5.325-8.14-10.014-18.55-11.545-29.149-.766-5.3-.78-10.759 1.148-16.115 1.929-5.356 6.402-10.43 12.367-12.79l.145-.056.146-.052a32.522 32.522 0 0 1 10.29-1.885c6.457-.127 12.625 1.658 17.83 4.586 7.93 4.46 14.327 11 20.703 17.789.692.737 1.384 1.481 2.076 2.222 29.671 1.337 40.027-5.507 47.39-13.54 3.755-4.098 6.69-8.995 10.442-14.147 3.752-5.152 8.697-10.777 16.314-13.93a21.561 21.561 0 0 1 7.824-1.638zm1.013 17.925a4.529 4.529 0 0 0-1.955.346c-3.299 1.365-5.61 3.723-8.648 7.895-3.039 4.171-6.427 9.934-11.721 15.71-8.033 8.765-20.623 16.386-41.225 18.745 7.154 6.034 14.434 10.94 21.575 14.23l13.15 4.242c11.839 2.249 22.923-.082 34.375-9.03 14.157-11.063 14.339-24.833 9.652-36.468-2.343-5.817-6.195-10.7-9.726-13.271-2.318-1.687-4.071-2.343-5.477-2.399zm-122.54 18.5c-1.556.022-3.21.362-5.126 1.028-1.288.523-1.468.776-1.94 2.086-.49 1.365-.757 4.062-.269 7.443.977 6.761 4.824 15.8 8.793 21.867 8.623 13.182 17.991 15.796 30.527 15.272 6.35-.266 13.304-1.726 20.454-3.641-11.335-8.295-20.188-18.721-28.08-27.125-6.088-6.482-11.659-11.753-16.407-14.424-2.374-1.335-4.366-2.162-6.426-2.422a10.956 10.956 0 0 0-1.527-.084z"
                />
              </svg>
            </button>
            <p className="text-xs mt-2 text-center">
              Produk <br /> Camilan
            </p>
          </div>
          <div className="flex flex-col items-center w-fit">
            <button
              onClick={() => {
                navigate("/find/produk-rempah");
                setOtherSelected(false);
              }}
              className={`w-12 h-12 ${
                activeCategory === "Produk Rempah" ? "bg-yellow-500" : null
              } bg-[#276b1e] rounded-full grid place-content-center`}
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width={64}
                height={64}
                fill="#fff"
                stroke="#fff"
                viewBox="0 0 53 53"
                className="w-6"
              >
                <g data-name={19}>
                  <path
                    d="M40.337 30.949a5.15 5.15 0 0 0 .793-10.24l.7-4.466H3.664l.7 4.466a5.15 5.15 0 0 0 .794 10.24h.816l1.494 9.5h30.55l1.5-9.5Z"
                    data-name="Path 169"
                  />
                  <path
                    d="M9.043 50.446A3.131 3.131 0 0 0 12.031 53H33.47a3.122 3.122 0 0 0 2.981-2.554l.651-4.119H8.393Z"
                    data-name="Path 170"
                  />
                  <path
                    d="M8.116 44.518h29.271l.355-2.256H7.751Z"
                    data-name="Path 171"
                  />
                  <path
                    d="M51.416 1.223C50.324.132 49.001-.313 48.455.235c0 0-2.19 2.584-3.325 3.873L48.516 7.5a414.921 414.921 0 0 1 3.878-3.319c.551-.547.102-1.875-.978-2.958Z"
                    data-name="Path 172"
                  />
                  <path
                    d="M30.56 14.047c-.5.2-1.017.442-1.539.7h13.46a41.816 41.816 0 0 1 4.737-5.975l-3.364-3.363a44.239 44.239 0 0 1-13.294 8.638Z"
                    data-name="Path 173"
                  />
                </g>
              </svg>
            </button>
            <p className="text-xs mt-2 text-center">
              Produk <br />
              Rempah
            </p>
          </div>
          <div className="flex flex-col items-center w-fit">
            <button
              onClick={() => {
                navigate("/find/kopi");
                setOtherSelected(false);
              }}
              className={`w-12 h-12 ${
                activeCategory === "Kopi" ? "bg-yellow-500" : null
              } bg-[#276b1e] rounded-full grid place-content-center`}
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                xmlSpace="preserve"
                width={64}
                height={64}
                fill="#fff"
                viewBox="0 0 512.036 512.036"
                className="w-8 h-8 ps-1"
              >
                <path d="M273.108 314.855c0-60.655 49.766-110.003 110.933-110.003 54.426 0 93.926-35.627 93.926-84.71v-16.887c-10.103-5.897-21.811-9.335-34.33-9.335h-8.533c-98.739 0-179.063 80.333-179.063 179.072 0 17.263 6.477 33.007 17.067 45.056v-3.193z" />
                <path d="M495.037 117.339v2.799c0 58.982-46.686 101.786-111.002 101.786-51.755 0-93.858 41.694-93.858 92.928v17.246c10.086 5.871 21.768 9.293 34.253 9.293h8.533c98.748 0 179.072-80.333 179.072-179.072.001-17.229-6.451-32.939-16.998-44.98zM126.937 148.747a7.32 7.32 0 0 1-.7 1.263c-14.029 20.983-18.475 46.251-12.186 69.333 6.084 22.374 21.905 40.713 44.544 51.644l16.777 7.159c9.779-6.383 18.099-15.07 23.663-25.924l3.9-7.612c21.427-41.813 24.858-89.199 9.677-133.427C196.8 65.137 162.982 28.094 117.38 6.872c-16.282-7.578-34.15-8.525-50.355-4.07l2.85 1.434c57.301 26.666 81.937 88.839 57.062 144.511z" />
                <path d="M104.561 283.339a72.726 72.726 0 0 0 30.771 6.801c6.409 0 12.757-.862 18.876-2.475l-2.671-1.143c-27.52-13.286-46.558-35.49-53.956-62.694-7.518-27.622-2.389-57.711 14.054-82.679 20.489-46.763-.563-98.918-49.186-121.549L46.85 11.783c-9.924 6.391-18.312 15.223-23.945 26.214l-3.9 7.603C-2.422 87.413-5.853 134.807 9.328 179.036c15.813 46.037 49.64 83.089 95.233 104.303zM162.548 402.707c42.24 42.453 88.457 43.58 130.159 3.157.23-.222.469-.427.725-.623l11.597-8.96c-3.217-12.39-10.018-23.663-19.942-32.58l-6.306-5.76c-75.034-69.478-191.454-66.603-259.354 6.221C7.71 375.998 1.02 391.188.184 407.367l3.157-2.449c54.46-49.238 111.173-50.176 159.207-2.211z" />
                <path d="M150.466 414.757c-41.779-41.719-87.603-40.644-136.175 3.234l-12.083 9.387c3.208 12.322 9.916 23.552 19.712 32.503l6.349 5.794c.06.06.128.111.196.171 35.866 30.788 81.468 46.063 126.771 46.063 48.597 0 96.845-17.587 132.318-52.471 11.819-11.844 18.586-26.999 19.473-43.127l-2.79 2.15c-48.708 46.941-104.721 45.593-153.771-3.704z" />
              </svg>
            </button>
            <p className="text-xs mt-2 text-center">Kopi</p>
          </div>
        </div>
      </div>
      <hr className="mt-4" />
    </div>
  );
};

export default CategorySelection;
